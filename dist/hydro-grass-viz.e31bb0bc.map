{"version":3,"sources":["images/simwe/data_file.js","images/grassoutput/data_file.js","node_modules/@esri/arcgis-to-geojson-utils/index.js","index.js"],"names":["layerInfos","title","file","bounds","opacity","dischAnimation","pointsEqual","a","b","i","length","closeRing","coordinates","push","ringIsClockwise","ringToTest","total","rLength","pt1","pt2","vertexIntersectsVertex","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","arrayIntersectsArray","j","coordinatesContainPoint","point","contains","l","coordinatesContainCoordinates","outer","inner","intersects","convertRingsToGeoJSON","rings","outerRings","holes","x","outerRing","hole","r","ring","slice","polygon","reverse","uncontainedHoles","pop","contained","type","orientRings","poly","output","shift","flattenMultiPolygonRings","shallowClone","obj","target","hasOwnProperty","getId","attributes","idAttribute","keys","key","Error","arcgisToGeoJSON","arcgis","geojson","features","y","z","points","paths","xmin","ymin","xmax","ymax","geometry","properties","id","err","JSON","stringify","spatialReference","wkid","console","warn","geojsonToArcGIS","result","geometries","mapboxgl","accessToken","map","Map","container","zoom","center","pitch","style","hash","addControl","NavigationControl","grassBbox","on","setScaleForLevel","scale","setScale","flyToStore","currentFeature","flyTo","what_spatial_scales_does_this_p","createPopUp","popUps","document","getElementsByClassName","remove","popup","Popup","closeOnClick","setLngLat","setHTML","ObjectId","why_is_this_location_a_problem","how_challenging_is_this_problem","what_is_the_greatest_barrier_to","what_actions_can_be_taken_to_fi","addTo","Element","prototype","parentNode","removeChild","getSource","addSource","url","layers","getStyle","labelLayerId","layout","frameCount","currentImage","floodingImages","flood_0_5","flood_1_0","flood_1_5","flood_2_0","flood_2_5","flood_3_0","flood_3_5","flood_4_0","flood_4_5","flood_5_0","getPath","addLayer","simwe","forEach","element","log","importedDischarge","buildLevelList","data","levels","prop","listings","getElementById","listing","appendChild","createElement","className","link","href","dataPosition","innerHTML","addEventListener","e","clickedListing","activeItem","classList","add","details","phone","phoneFormatted","fetch","cache","then","res","json","selectedFeatureIndex","queryRenderedFeatures","clickedPoint","selectedFeature"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA,IAAIA,UAAU,GAAG,CACd;AAACC,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CADc,EAEV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAFU,EAGV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAHU,EAIV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAJU,EAKV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CALU,EAMV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CANU,EAOV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAPU,EAQV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CARU,EASV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CATU,EAUV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAVU,EAWV;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAXU,EAYV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAZU,EAaV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAbU,EAcV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAdU,EAeV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAfU,EAgBV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAhBU,EAiBV;AAACH,EAAAA,KAAK,EAAE,gCAAR;AAA0CC,EAAAA,IAAI,EAAE,oCAAhD;AAAsFC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAA9F;AAA0JC,EAAAA,OAAO,EAAE;AAAnK,CAjBU,CAAjB;eAoBeJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBf;AAEA,IAAIK,cAAc,GAAG,CAClB;AAACJ,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CADkB,EAEjB;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAFiB,EAGjB;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAHiB,EAIjB;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CAJiB,EAKjB;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CALiB,EAMjB;AAACH,EAAAA,KAAK,EAAE,oCAAR;AAA8CC,EAAAA,IAAI,EAAE,wCAApD;AAA8FC,EAAAA,MAAM,EAAE,CAAC,CAAC,WAAD,EAAc,CAAC,WAAf,CAAD,EAA8B,CAAC,WAAD,EAAc,CAAC,WAAf,CAA9B,CAAtG;AAAkKC,EAAAA,OAAO,EAAE;AAA3K,CANiB,CAArB;eASeC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXf;;;;;;;;;;;;;;;AAgBA;AACA,SAASC,WAAT,CAAsBC,CAAtB,EAAyBC,CAAzB,EAA4B;AAC1B,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,CAAC,CAACG,MAAtB,EAA8BD,CAAC,EAA/B,EAAmC;AACjC,QAAIF,CAAC,CAACE,CAAD,CAAD,KAASD,CAAC,CAACC,CAAD,CAAd,EAAmB;AACjB,aAAO,KAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD,EAED;;;AACA,SAASE,SAAT,CAAoBC,WAApB,EAAiC;AAC/B,MAAI,CAACN,WAAW,CAACM,WAAW,CAAC,CAAD,CAAZ,EAAiBA,WAAW,CAACA,WAAW,CAACF,MAAZ,GAAqB,CAAtB,CAA5B,CAAhB,EAAuE;AACrEE,IAAAA,WAAW,CAACC,IAAZ,CAAiBD,WAAW,CAAC,CAAD,CAA5B;AACD;;AACD,SAAOA,WAAP;AACD,EAED;AACA;AACA;;;AACA,SAASE,eAAT,CAA0BC,UAA1B,EAAsC;AACpC,MAAIC,KAAK,GAAG,CAAZ;AACA,MAAIP,CAAC,GAAG,CAAR;AACA,MAAIQ,OAAO,GAAGF,UAAU,CAACL,MAAzB;AACA,MAAIQ,GAAG,GAAGH,UAAU,CAACN,CAAD,CAApB;AACA,MAAIU,GAAJ;;AACA,OAAKV,CAAL,EAAQA,CAAC,GAAGQ,OAAO,GAAG,CAAtB,EAAyBR,CAAC,EAA1B,EAA8B;AAC5BU,IAAAA,GAAG,GAAGJ,UAAU,CAACN,CAAC,GAAG,CAAL,CAAhB;AACAO,IAAAA,KAAK,IAAI,CAACG,GAAG,CAAC,CAAD,CAAH,GAASD,GAAG,CAAC,CAAD,CAAb,KAAqBC,GAAG,CAAC,CAAD,CAAH,GAASD,GAAG,CAAC,CAAD,CAAjC,CAAT;AACAA,IAAAA,GAAG,GAAGC,GAAN;AACD;;AACD,SAAQH,KAAK,IAAI,CAAjB;AACD,EAED;;;AACA,SAASI,sBAAT,CAAiCC,EAAjC,EAAqCC,EAArC,EAAyCC,EAAzC,EAA6CC,EAA7C,EAAiD;AAC/C,MAAIC,GAAG,GAAI,CAACD,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBF,EAAE,CAAC,CAAD,CAAF,GAAQE,EAAE,CAAC,CAAD,CAA7B,CAAD,GAAuC,CAACC,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBF,EAAE,CAAC,CAAD,CAAF,GAAQE,EAAE,CAAC,CAAD,CAA7B,CAAjD;AACA,MAAIG,GAAG,GAAI,CAACJ,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBA,EAAE,CAAC,CAAD,CAAF,GAAQE,EAAE,CAAC,CAAD,CAA7B,CAAD,GAAuC,CAACD,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBA,EAAE,CAAC,CAAD,CAAF,GAAQE,EAAE,CAAC,CAAD,CAA7B,CAAjD;AACA,MAAII,EAAE,GAAI,CAACH,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBD,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAA7B,CAAD,GAAuC,CAACG,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAmBD,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAA7B,CAAhD;;AAEA,MAAIM,EAAE,KAAK,CAAX,EAAc;AACZ,QAAIC,EAAE,GAAGH,GAAG,GAAGE,EAAf;AACA,QAAIE,EAAE,GAAGH,GAAG,GAAGC,EAAf;;AAEA,QAAIC,EAAE,IAAI,CAAN,IAAWA,EAAE,IAAI,CAAjB,IAAsBC,EAAE,IAAI,CAA5B,IAAiCA,EAAE,IAAI,CAA3C,EAA8C;AAC5C,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD,EAED;;;AACA,SAASC,oBAAT,CAA+BvB,CAA/B,EAAkCC,CAAlC,EAAqC;AACnC,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,CAAC,CAACG,MAAF,GAAW,CAA/B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,SAAK,IAAIsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvB,CAAC,CAACE,MAAF,GAAW,CAA/B,EAAkCqB,CAAC,EAAnC,EAAuC;AACrC,UAAIX,sBAAsB,CAACb,CAAC,CAACE,CAAD,CAAF,EAAOF,CAAC,CAACE,CAAC,GAAG,CAAL,CAAR,EAAiBD,CAAC,CAACuB,CAAD,CAAlB,EAAuBvB,CAAC,CAACuB,CAAC,GAAG,CAAL,CAAxB,CAA1B,EAA4D;AAC1D,eAAO,IAAP;AACD;AACF;AACF;;AAED,SAAO,KAAP;AACD,EAED;;;AACA,SAASC,uBAAT,CAAkCpB,WAAlC,EAA+CqB,KAA/C,EAAsD;AACpD,MAAIC,QAAQ,GAAG,KAAf;;AACA,OAAK,IAAIzB,CAAC,GAAG,CAAC,CAAT,EAAY0B,CAAC,GAAGvB,WAAW,CAACF,MAA5B,EAAoCqB,CAAC,GAAGI,CAAC,GAAG,CAAjD,EAAoD,EAAE1B,CAAF,GAAM0B,CAA1D,EAA6DJ,CAAC,GAAGtB,CAAjE,EAAoE;AAClE,QAAI,CAAEG,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,KAAqBwB,KAAK,CAAC,CAAD,CAA1B,IAAiCA,KAAK,CAAC,CAAD,CAAL,GAAWrB,WAAW,CAACmB,CAAD,CAAX,CAAe,CAAf,CAA7C,IACCnB,WAAW,CAACmB,CAAD,CAAX,CAAe,CAAf,KAAqBE,KAAK,CAAC,CAAD,CAA1B,IAAiCA,KAAK,CAAC,CAAD,CAAL,GAAWrB,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,CAD9C,KAECwB,KAAK,CAAC,CAAD,CAAL,GAAa,CAACrB,WAAW,CAACmB,CAAD,CAAX,CAAe,CAAf,IAAoBnB,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,CAArB,KAA2CwB,KAAK,CAAC,CAAD,CAAL,GAAWrB,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,CAAtD,CAAD,IAA8EG,WAAW,CAACmB,CAAD,CAAX,CAAe,CAAf,IAAoBnB,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,CAAlG,CAAD,GAAyHG,WAAW,CAACH,CAAD,CAAX,CAAe,CAAf,CAFzI,EAE6J;AAC3JyB,MAAAA,QAAQ,GAAG,CAACA,QAAZ;AACD;AACF;;AACD,SAAOA,QAAP;AACD,EAED;;;AACA,SAASE,6BAAT,CAAwCC,KAAxC,EAA+CC,KAA/C,EAAsD;AACpD,MAAIC,UAAU,GAAGT,oBAAoB,CAACO,KAAD,EAAQC,KAAR,CAArC;AACA,MAAIJ,QAAQ,GAAGF,uBAAuB,CAACK,KAAD,EAAQC,KAAK,CAAC,CAAD,CAAb,CAAtC;;AACA,MAAI,CAACC,UAAD,IAAeL,QAAnB,EAA6B;AAC3B,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,EAED;AACA;AACA;;;AACA,SAASM,qBAAT,CAAgCC,KAAhC,EAAuC;AACrC,MAAIC,UAAU,GAAG,EAAjB;AACA,MAAIC,KAAK,GAAG,EAAZ;AACA,MAAIC,CAAJ,CAHqC,CAG9B;;AACP,MAAIC,SAAJ,CAJqC,CAItB;;AACf,MAAIC,IAAJ,CALqC,CAK3B;AAEV;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,KAAK,CAAC/B,MAA1B,EAAkCqC,CAAC,EAAnC,EAAuC;AACrC,QAAIC,IAAI,GAAGrC,SAAS,CAAC8B,KAAK,CAACM,CAAD,CAAL,CAASE,KAAT,CAAe,CAAf,CAAD,CAApB;;AACA,QAAID,IAAI,CAACtC,MAAL,GAAc,CAAlB,EAAqB;AACnB;AACD,KAJoC,CAKrC;;;AACA,QAAII,eAAe,CAACkC,IAAD,CAAnB,EAA2B;AACzB,UAAIE,OAAO,GAAG,CAAEF,IAAI,CAACC,KAAL,GAAaE,OAAb,EAAF,CAAd,CADyB,CACiB;;AAC1CT,MAAAA,UAAU,CAAC7B,IAAX,CAAgBqC,OAAhB,EAFyB,CAEC;AAC3B,KAHD,MAGO;AACLP,MAAAA,KAAK,CAAC9B,IAAN,CAAWmC,IAAI,CAACC,KAAL,GAAaE,OAAb,EAAX,EADK,CAC+B;AACrC;AACF;;AAED,MAAIC,gBAAgB,GAAG,EAAvB,CAtBqC,CAwBrC;;AACA,SAAOT,KAAK,CAACjC,MAAb,EAAqB;AACnB;AACAoC,IAAAA,IAAI,GAAGH,KAAK,CAACU,GAAN,EAAP,CAFmB,CAInB;;AACA,QAAIC,SAAS,GAAG,KAAhB;;AACA,SAAKV,CAAC,GAAGF,UAAU,CAAChC,MAAX,GAAoB,CAA7B,EAAgCkC,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AAC3CC,MAAAA,SAAS,GAAGH,UAAU,CAACE,CAAD,CAAV,CAAc,CAAd,CAAZ;;AACA,UAAIR,6BAA6B,CAACS,SAAD,EAAYC,IAAZ,CAAjC,EAAoD;AAClD;AACAJ,QAAAA,UAAU,CAACE,CAAD,CAAV,CAAc/B,IAAd,CAAmBiC,IAAnB;AACAQ,QAAAA,SAAS,GAAG,IAAZ;AACA;AACD;AACF,KAdkB,CAgBnB;AACA;;;AACA,QAAI,CAACA,SAAL,EAAgB;AACdF,MAAAA,gBAAgB,CAACvC,IAAjB,CAAsBiC,IAAtB;AACD;AACF,GA9CoC,CAgDrC;;;AACA,SAAOM,gBAAgB,CAAC1C,MAAxB,EAAgC;AAC9B;AACAoC,IAAAA,IAAI,GAAGM,gBAAgB,CAACC,GAAjB,EAAP,CAF8B,CAI9B;;AACA,QAAId,UAAU,GAAG,KAAjB;;AAEA,SAAKK,CAAC,GAAGF,UAAU,CAAChC,MAAX,GAAoB,CAA7B,EAAgCkC,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AAC3CC,MAAAA,SAAS,GAAGH,UAAU,CAACE,CAAD,CAAV,CAAc,CAAd,CAAZ;;AACA,UAAId,oBAAoB,CAACe,SAAD,EAAYC,IAAZ,CAAxB,EAA2C;AACzC;AACAJ,QAAAA,UAAU,CAACE,CAAD,CAAV,CAAc/B,IAAd,CAAmBiC,IAAnB;AACAP,QAAAA,UAAU,GAAG,IAAb;AACA;AACD;AACF;;AAED,QAAI,CAACA,UAAL,EAAiB;AACfG,MAAAA,UAAU,CAAC7B,IAAX,CAAgB,CAACiC,IAAI,CAACK,OAAL,EAAD,CAAhB;AACD;AACF;;AAED,MAAIT,UAAU,CAAChC,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,WAAO;AACL6C,MAAAA,IAAI,EAAE,SADD;AAEL3C,MAAAA,WAAW,EAAE8B,UAAU,CAAC,CAAD;AAFlB,KAAP;AAID,GALD,MAKO;AACL,WAAO;AACLa,MAAAA,IAAI,EAAE,cADD;AAEL3C,MAAAA,WAAW,EAAE8B;AAFR,KAAP;AAID;AACF,EAED;AACA;AACA;;;AACA,SAASc,WAAT,CAAsBC,IAAtB,EAA4B;AAC1B,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIR,OAAO,GAAGO,IAAI,CAACR,KAAL,CAAW,CAAX,CAAd;AACA,MAAIJ,SAAS,GAAGlC,SAAS,CAACuC,OAAO,CAACS,KAAR,GAAgBV,KAAhB,CAAsB,CAAtB,CAAD,CAAzB;;AACA,MAAIJ,SAAS,CAACnC,MAAV,IAAoB,CAAxB,EAA2B;AACzB,QAAI,CAACI,eAAe,CAAC+B,SAAD,CAApB,EAAiC;AAC/BA,MAAAA,SAAS,CAACM,OAAV;AACD;;AAEDO,IAAAA,MAAM,CAAC7C,IAAP,CAAYgC,SAAZ;;AAEA,SAAK,IAAIpC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,OAAO,CAACxC,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,UAAIqC,IAAI,GAAGnC,SAAS,CAACuC,OAAO,CAACzC,CAAD,CAAP,CAAWwC,KAAX,CAAiB,CAAjB,CAAD,CAApB;;AACA,UAAIH,IAAI,CAACpC,MAAL,IAAe,CAAnB,EAAsB;AACpB,YAAII,eAAe,CAACgC,IAAD,CAAnB,EAA2B;AACzBA,UAAAA,IAAI,CAACK,OAAL;AACD;;AACDO,QAAAA,MAAM,CAAC7C,IAAP,CAAYiC,IAAZ;AACD;AACF;AACF;;AAED,SAAOY,MAAP;AACD,EAED;AACA;;;AACA,SAASE,wBAAT,CAAmCnB,KAAnC,EAA0C;AACxC,MAAIiB,MAAM,GAAG,EAAb;;AACA,OAAK,IAAIjD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,KAAK,CAAC/B,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,QAAIyC,OAAO,GAAGM,WAAW,CAACf,KAAK,CAAChC,CAAD,CAAN,CAAzB;;AACA,SAAK,IAAImC,CAAC,GAAGM,OAAO,CAACxC,MAAR,GAAiB,CAA9B,EAAiCkC,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;AAC5C,UAAII,IAAI,GAAGE,OAAO,CAACN,CAAD,CAAP,CAAWK,KAAX,CAAiB,CAAjB,CAAX;AACAS,MAAAA,MAAM,CAAC7C,IAAP,CAAYmC,IAAZ;AACD;AACF;;AACD,SAAOU,MAAP;AACD,EAED;AACA;;;AACA,SAASG,YAAT,CAAuBC,GAAvB,EAA4B;AAC1B,MAAIC,MAAM,GAAG,EAAb;;AACA,OAAK,IAAItD,CAAT,IAAcqD,GAAd,EAAmB;AACjB,QAAIA,GAAG,CAACE,cAAJ,CAAmBvD,CAAnB,CAAJ,EAA2B;AACzBsD,MAAAA,MAAM,CAACtD,CAAD,CAAN,GAAYqD,GAAG,CAACrD,CAAD,CAAf;AACD;AACF;;AACD,SAAOsD,MAAP;AACD;;AAED,SAASE,KAAT,CAAgBC,UAAhB,EAA4BC,WAA5B,EAAyC;AACvC,MAAIC,IAAI,GAAGD,WAAW,GAAG,CAACA,WAAD,EAAc,UAAd,EAA0B,KAA1B,CAAH,GAAsC,CAAC,UAAD,EAAa,KAAb,CAA5D;;AACA,OAAK,IAAI1D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2D,IAAI,CAAC1D,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,QAAI4D,GAAG,GAAGD,IAAI,CAAC3D,CAAD,CAAd;;AACA,QACE4D,GAAG,IAAIH,UAAP,KACC,OAAOA,UAAU,CAACG,GAAD,CAAjB,KAA2B,QAA3B,IACC,OAAOH,UAAU,CAACG,GAAD,CAAjB,KAA2B,QAF7B,CADF,EAIE;AACA,aAAOH,UAAU,CAACG,GAAD,CAAjB;AACD;AACF;;AACD,QAAMC,KAAK,CAAC,6BAAD,CAAX;AACD;;AAEM,SAASC,eAAT,CAA0BC,MAA1B,EAAkCL,WAAlC,EAA+C;AACpD,MAAIM,OAAO,GAAG,EAAd;;AAEA,MAAID,MAAM,CAACE,QAAX,EAAqB;AACnBD,IAAAA,OAAO,CAAClB,IAAR,GAAe,mBAAf;AACAkB,IAAAA,OAAO,CAACC,QAAR,GAAmB,EAAnB;;AACA,SAAK,IAAIjE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+D,MAAM,CAACE,QAAP,CAAgBhE,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/CgE,MAAAA,OAAO,CAACC,QAAR,CAAiB7D,IAAjB,CAAsB0D,eAAe,CAACC,MAAM,CAACE,QAAP,CAAgBjE,CAAhB,CAAD,EAAqB0D,WAArB,CAArC;AACD;AACF;;AAED,MAAI,OAAOK,MAAM,CAAC5B,CAAd,KAAoB,QAApB,IAAgC,OAAO4B,MAAM,CAACG,CAAd,KAAoB,QAAxD,EAAkE;AAChEF,IAAAA,OAAO,CAAClB,IAAR,GAAe,OAAf;AACAkB,IAAAA,OAAO,CAAC7D,WAAR,GAAsB,CAAC4D,MAAM,CAAC5B,CAAR,EAAW4B,MAAM,CAACG,CAAlB,CAAtB;;AACA,QAAI,OAAOH,MAAM,CAACI,CAAd,KAAoB,QAAxB,EAAkC;AAChCH,MAAAA,OAAO,CAAC7D,WAAR,CAAoBC,IAApB,CAAyB2D,MAAM,CAACI,CAAhC;AACD;AACF;;AAED,MAAIJ,MAAM,CAACK,MAAX,EAAmB;AACjBJ,IAAAA,OAAO,CAAClB,IAAR,GAAe,YAAf;AACAkB,IAAAA,OAAO,CAAC7D,WAAR,GAAsB4D,MAAM,CAACK,MAAP,CAAc5B,KAAd,CAAoB,CAApB,CAAtB;AACD;;AAED,MAAIuB,MAAM,CAACM,KAAX,EAAkB;AAChB,QAAIN,MAAM,CAACM,KAAP,CAAapE,MAAb,KAAwB,CAA5B,EAA+B;AAC7B+D,MAAAA,OAAO,CAAClB,IAAR,GAAe,YAAf;AACAkB,MAAAA,OAAO,CAAC7D,WAAR,GAAsB4D,MAAM,CAACM,KAAP,CAAa,CAAb,EAAgB7B,KAAhB,CAAsB,CAAtB,CAAtB;AACD,KAHD,MAGO;AACLwB,MAAAA,OAAO,CAAClB,IAAR,GAAe,iBAAf;AACAkB,MAAAA,OAAO,CAAC7D,WAAR,GAAsB4D,MAAM,CAACM,KAAP,CAAa7B,KAAb,CAAmB,CAAnB,CAAtB;AACD;AACF;;AAED,MAAIuB,MAAM,CAAC/B,KAAX,EAAkB;AAChBgC,IAAAA,OAAO,GAAGjC,qBAAqB,CAACgC,MAAM,CAAC/B,KAAP,CAAaQ,KAAb,CAAmB,CAAnB,CAAD,CAA/B;AACD;;AAED,MACE,OAAOuB,MAAM,CAACO,IAAd,KAAuB,QAAvB,IACA,OAAOP,MAAM,CAACQ,IAAd,KAAuB,QADvB,IAEA,OAAOR,MAAM,CAACS,IAAd,KAAuB,QAFvB,IAGA,OAAOT,MAAM,CAACU,IAAd,KAAuB,QAJzB,EAKE;AACAT,IAAAA,OAAO,CAAClB,IAAR,GAAe,SAAf;AACAkB,IAAAA,OAAO,CAAC7D,WAAR,GAAsB,CAAC,CACrB,CAAC4D,MAAM,CAACS,IAAR,EAAcT,MAAM,CAACU,IAArB,CADqB,EAErB,CAACV,MAAM,CAACO,IAAR,EAAcP,MAAM,CAACU,IAArB,CAFqB,EAGrB,CAACV,MAAM,CAACO,IAAR,EAAcP,MAAM,CAACQ,IAArB,CAHqB,EAIrB,CAACR,MAAM,CAACS,IAAR,EAAcT,MAAM,CAACQ,IAArB,CAJqB,EAKrB,CAACR,MAAM,CAACS,IAAR,EAAcT,MAAM,CAACU,IAArB,CALqB,CAAD,CAAtB;AAOD;;AAED,MAAIV,MAAM,CAACW,QAAP,IAAmBX,MAAM,CAACN,UAA9B,EAA0C;AACxCO,IAAAA,OAAO,CAAClB,IAAR,GAAe,SAAf;AACAkB,IAAAA,OAAO,CAACU,QAAR,GAAoBX,MAAM,CAACW,QAAR,GAAoBZ,eAAe,CAACC,MAAM,CAACW,QAAR,CAAnC,GAAuD,IAA1E;AACAV,IAAAA,OAAO,CAACW,UAAR,GAAsBZ,MAAM,CAACN,UAAR,GAAsBL,YAAY,CAACW,MAAM,CAACN,UAAR,CAAlC,GAAwD,IAA7E;;AACA,QAAIM,MAAM,CAACN,UAAX,EAAuB;AACrB,UAAI;AACFO,QAAAA,OAAO,CAACY,EAAR,GAAapB,KAAK,CAACO,MAAM,CAACN,UAAR,EAAoBC,WAApB,CAAlB;AACD,OAFD,CAEE,OAAOmB,GAAP,EAAY,CACZ;AACD;AACF;AACF,GAjEmD,CAmEpD;;;AACA,MAAIC,IAAI,CAACC,SAAL,CAAef,OAAO,CAACU,QAAvB,MAAqCI,IAAI,CAACC,SAAL,CAAe,EAAf,CAAzC,EAA6D;AAC3Df,IAAAA,OAAO,CAACU,QAAR,GAAmB,IAAnB;AACD;;AAED,MACEX,MAAM,CAACiB,gBAAP,IACAjB,MAAM,CAACiB,gBAAP,CAAwBC,IADxB,IAEAlB,MAAM,CAACiB,gBAAP,CAAwBC,IAAxB,KAAiC,IAHnC,EAIE;AACAC,IAAAA,OAAO,CAACC,IAAR,CAAa,4CAA4CL,IAAI,CAACC,SAAL,CAAehB,MAAM,CAACiB,gBAAtB,CAAzD;AACD;;AAED,SAAOhB,OAAP;AACD;;AAEM,SAASoB,eAAT,CAA0BpB,OAA1B,EAAmCN,WAAnC,EAAgD;AACrDA,EAAAA,WAAW,GAAGA,WAAW,IAAI,UAA7B;AACA,MAAIsB,gBAAgB,GAAG;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAvB;AACA,MAAII,MAAM,GAAG,EAAb;AACA,MAAIrF,CAAJ;;AAEA,UAAQgE,OAAO,CAAClB,IAAhB;AACE,SAAK,OAAL;AACEuC,MAAAA,MAAM,CAAClD,CAAP,GAAW6B,OAAO,CAAC7D,WAAR,CAAoB,CAApB,CAAX;AACAkF,MAAAA,MAAM,CAACnB,CAAP,GAAWF,OAAO,CAAC7D,WAAR,CAAoB,CAApB,CAAX;AACAkF,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,YAAL;AACEK,MAAAA,MAAM,CAACjB,MAAP,GAAgBJ,OAAO,CAAC7D,WAAR,CAAoBqC,KAApB,CAA0B,CAA1B,CAAhB;AACA6C,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,YAAL;AACEK,MAAAA,MAAM,CAAChB,KAAP,GAAe,CAACL,OAAO,CAAC7D,WAAR,CAAoBqC,KAApB,CAA0B,CAA1B,CAAD,CAAf;AACA6C,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,iBAAL;AACEK,MAAAA,MAAM,CAAChB,KAAP,GAAeL,OAAO,CAAC7D,WAAR,CAAoBqC,KAApB,CAA0B,CAA1B,CAAf;AACA6C,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,SAAL;AACEK,MAAAA,MAAM,CAACrD,KAAP,GAAee,WAAW,CAACiB,OAAO,CAAC7D,WAAR,CAAoBqC,KAApB,CAA0B,CAA1B,CAAD,CAA1B;AACA6C,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,cAAL;AACEK,MAAAA,MAAM,CAACrD,KAAP,GAAemB,wBAAwB,CAACa,OAAO,CAAC7D,WAAR,CAAoBqC,KAApB,CAA0B,CAA1B,CAAD,CAAvC;AACA6C,MAAAA,MAAM,CAACL,gBAAP,GAA0BA,gBAA1B;AACA;;AACF,SAAK,SAAL;AACE,UAAIhB,OAAO,CAACU,QAAZ,EAAsB;AACpBW,QAAAA,MAAM,CAACX,QAAP,GAAkBU,eAAe,CAACpB,OAAO,CAACU,QAAT,EAAmBhB,WAAnB,CAAjC;AACD;;AACD2B,MAAAA,MAAM,CAAC5B,UAAP,GAAqBO,OAAO,CAACW,UAAT,GAAuBvB,YAAY,CAACY,OAAO,CAACW,UAAT,CAAnC,GAA0D,EAA9E;;AACA,UAAIX,OAAO,CAACY,EAAZ,EAAgB;AACdS,QAAAA,MAAM,CAAC5B,UAAP,CAAkBC,WAAlB,IAAiCM,OAAO,CAACY,EAAzC;AACD;;AACD;;AACF,SAAK,mBAAL;AACES,MAAAA,MAAM,GAAG,EAAT;;AACA,WAAKrF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgE,OAAO,CAACC,QAAR,CAAiBhE,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CqF,QAAAA,MAAM,CAACjF,IAAP,CAAYgF,eAAe,CAACpB,OAAO,CAACC,QAAR,CAAiBjE,CAAjB,CAAD,EAAsB0D,WAAtB,CAA3B;AACD;;AACD;;AACF,SAAK,oBAAL;AACE2B,MAAAA,MAAM,GAAG,EAAT;;AACA,WAAKrF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgE,OAAO,CAACsB,UAAR,CAAmBrF,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC9CqF,QAAAA,MAAM,CAACjF,IAAP,CAAYgF,eAAe,CAACpB,OAAO,CAACsB,UAAR,CAAmBtF,CAAnB,CAAD,EAAwB0D,WAAxB,CAA3B;AACD;;AACD;AA9CJ;;AAiDA,SAAO2B,MAAP;AACD;;eAEc;AAAEvB,EAAAA,eAAe,EAAEA,eAAnB;AAAoCsB,EAAAA,eAAe,EAAEA;AAArD;;;;;AClZf;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAOA;;;;AALA;AACA;AACA;AACA;AACA;AAKAG,QAAQ,CAACC,WAAT;AACA,IAAMC,GAAG,GAAG,IAAIF,QAAQ,CAACG,GAAb,CAAiB;AACzBC,EAAAA,SAAS,EAAE,KADc;AAEzBC,EAAAA,IAAI,EAAE,EAFmB;AAGzBC,EAAAA,MAAM,EAAE,CAAC,CAAC,OAAF,EAAU,OAAV,CAHiB;AAIzBC,EAAAA,KAAK,EAAE,EAJkB;AAKzBC,EAAAA,KAAK,EAAE,mDALkB;AAMzBC,EAAAA,IAAI,EAAE;AANmB,CAAjB,EAOTC,UAPS,CAOE,IAAIV,QAAQ,CAACW,iBAAb,EAPF,CAAZ,EASA;;AACA,SAASC,SAAT,CAAmBzG,MAAnB,EAA2B;AACvB,SAAO,CACH,CAACA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,CADG,EAEH,CAACA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,CAFG,EAGH,CAACA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,CAHG,EAIH,CAACA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,CAJG,CAAP;AAMH;;AAED+F,GAAG,CAACW,EAAJ,CAAO,MAAP,EAAe,YAAM;AAEjB,WAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAC7B,QAAIC,QAAQ,GAAG,EAAf;;AACA,YAAQD,KAAR;AACI,WAAK,WAAL;AACIC,QAAAA,QAAQ,GAAG,EAAX;AACA;;AACJ,WAAK,cAAL;AACIA,QAAAA,QAAQ,GAAG,EAAX;AACA;;AACJ,WAAK,MAAL;AACIA,QAAAA,QAAQ,GAAG,EAAX;AACA;;AACJ,WAAK,QAAL;AACIA,QAAAA,QAAQ,GAAG,EAAX;AACA;;AACJ;AACIA,QAAAA,QAAQ,GAAG,EAAX;AAdR;;AAgBA,WAAOA,QAAP;AACH;;AAED,WAASC,UAAT,CAAoBC,cAApB,EAAoC;AAChChB,IAAAA,GAAG,CAACiB,KAAJ,CAAU;AACRb,MAAAA,MAAM,EAAEY,cAAc,CAAC/B,QAAf,CAAwBvE,WADxB;AAERyF,MAAAA,IAAI,EAAES,gBAAgB,CAACI,cAAc,CAAC9B,UAAf,CAA0BgC,+BAA3B;AAFd,KAAV;AAID;;AAED,WAASC,WAAT,CAAqBH,cAArB,EAAqC;AACnC,QAAII,MAAM,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,gBAAhC,CAAb,CADmC,CAEnC;;AACA,QAAIF,MAAM,CAAC,CAAD,CAAV,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAUG,MAAV;AAEf,QAAIC,KAAK,GAAG,IAAI1B,QAAQ,CAAC2B,KAAb,CAAmB;AAAEC,MAAAA,YAAY,EAAE;AAAhB,KAAnB,EACTC,SADS,CACCX,cAAc,CAAC/B,QAAf,CAAwBvE,WADzB,EAETkH,OAFS,CAED,0BAAmBZ,cAAc,CAAC9B,UAAf,CAA0B2C,QAA7C,uBACP,gCADO,GAC4Bb,cAAc,CAAC9B,UAAf,CAA0B4C,8BADtD,GACuF,OADvF,GAEP,mCAFO,GAE+Bd,cAAc,CAAC9B,UAAf,CAA0B6C,+BAFzD,GAE2F,OAF3F,GAGP,kCAHO,GAG8Bf,cAAc,CAAC9B,UAAf,CAA0B4C,8BAHxD,GAGyF,OAHzF,GAIP,iCAJO,GAI6Bd,cAAc,CAAC9B,UAAf,CAA0B8C,+BAJvD,GAIyF,OAJzF,GAKP,iCALO,GAK6BhB,cAAc,CAAC9B,UAAf,CAA0B+C,+BALvD,GAKyF,OALzF,GAMP,uBARQ,EAUTC,KAVS,CAUHlC,GAVG,CAAZ;AAWD,GA9Cc,CAgDf;;;AACE,MAAI,EAAE,YAAYmC,OAAO,CAACC,SAAtB,CAAJ,EAAsC;AAClCD,IAAAA,OAAO,CAACC,SAAR,CAAkBb,MAAlB,GAA2B,YAAW;AACtC,UAAI,KAAKc,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBC,WAAhB,CAA4B,IAA5B;AACH;AACA,KAJD;AAKH,GAvDY,CAyDjB;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAI,CAAEtC,GAAG,CAACuC,SAAJ,CAAc,WAAd,CAAN,EAAkC;AAACvC,IAAAA,GAAG,CAACwC,SAAJ,CAAc,WAAd,EAA2B;AAAEnF,MAAAA,IAAI,EAAE,QAAR;AAAkBoF,MAAAA,GAAG,EAAE;AAAvB,KAA3B;AAAyF;;AAE5H,MAAMC,MAAM,GAAG1C,GAAG,CAAC2C,QAAJ,GAAeD,MAA9B;AAEA,MAAIE,YAAJ;;AACA,OAAK,IAAIrI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmI,MAAM,CAAClI,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpC,QAAImI,MAAM,CAACnI,CAAD,CAAN,CAAU8C,IAAV,KAAmB,QAAnB,IAA+BqF,MAAM,CAACnI,CAAD,CAAN,CAAUsI,MAAV,CAAiB,YAAjB,CAAnC,EAAmE;AACnED,MAAAA,YAAY,GAAGF,MAAM,CAACnI,CAAD,CAAN,CAAU4E,EAAzB;AACA;AACC;AACJ,GAzEgB,CA2EjB;;;AACA,MAAI2D,UAAU,GAAG,EAAjB;AACA,MAAIC,YAAY,GAAG,CAAnB;AACA,MAAIC,cAAc,GAAG,CAACC,oBAAD,EAAYC,qBAAZ,EAAuBC,qBAAvB,EAAkCC,qBAAlC,EAA6CC,qBAA7C,EAAwDC,qBAAxD,EAAmEC,qBAAnE,EAA8EC,qBAA9E,EAAyFC,qBAAzF,EAAoGC,sBAApG,CAArB;;AACA,WAASC,OAAT,GAAmB;AACf,WAAOX,cAAc,CAACD,YAAD,CAArB;AACH;;AAGD/C,EAAAA,GAAG,CAACwC,SAAJ,CAAc,cAAd,EAA8B;AAC1BnF,IAAAA,IAAI,EAAE,OADoB;AAE1BoF,IAAAA,GAAG,EAAEkB,OAAO,EAFc;AAG1BjJ,IAAAA,WAAW,EAAE,CACT,CAAC,CAAC,gBAAF,EAAoB,aAApB,CADS,EAET,CAAC,CAAC,gBAAF,EAAoB,aAApB,CAFS,EAGT,CAAC,CAAC,gBAAF,EAAoB,gBAApB,CAHS,EAIT,CAAC,CAAC,gBAAF,EAAoB,gBAApB,CAJS;AAHa,GAA9B;AAWAsF,EAAAA,GAAG,CAAC4D,QAAJ,CAAa;AACT,UAAM,cADG;AAET,cAAU,cAFD;AAGT,YAAQ,QAHC;AAIT,aAAS;AACL,wBAAkB,IADb;AAEL,8BAAwB;AAFnB;AAJA,GAAb,EAQEhB,YARF,EA/FiB,CA0GjB;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGIiB,qBAAMC,OAAN,CAAc,UAAAC,OAAO,EAAI;AACrBtE,IAAAA,OAAO,CAACuE,GAAR,CAAYC,UAAkBF,OAAO,CAAChK,KAA1B,CAAZ;AACAiG,IAAAA,GAAG,CAACwC,SAAJ,CAAcuB,OAAO,CAAChK,KAAtB,EAA6B;AACzBsD,MAAAA,IAAI,EAAE,OADmB;AAEzBoF,MAAAA,GAAG,EAAEwB,UAAkBF,OAAO,CAAChK,KAA1B,CAFoB;AAGzBW,MAAAA,WAAW,EAAEgG,SAAS,CAACqD,OAAO,CAAC9J,MAAT;AAHG,KAA7B;AAMA+F,IAAAA,GAAG,CAAC4D,QAAJ,CAAa;AACT,YAAMG,OAAO,CAAChK,KADL;AAET,gBAAUgK,OAAO,CAAChK,KAFT;AAGT,cAAQ,QAHC;AAIT,eAAS;AACL,0BAAkB,IADb;AAEL,gCAAwB;AAFnB;AAJA,KAAb,EAQE6I,YARF;AASH,GAjBD;;AAmBJ,WAASsB,cAAT,CAAwBC,IAAxB,EAA8B;AAC1B,QAAIA,IAAI,CAAC3F,QAAL,CAAchE,MAAd,KAAyB4J,MAAM,CAAC5J,MAApC,EAA4C;AAC5C;AACA,WAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4J,IAAI,CAAC3F,QAAL,CAAchE,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,YAAIyG,cAAc,GAAGmD,IAAI,CAAC3F,QAAL,CAAcjE,CAAd,CAArB,CADyC,CAEzC;AACA;;AACA,YAAI8J,IAAI,GAAGrD,cAAc,CAAC9B,UAA1B,CAJyC,CAKzC;AACA;;AACA,YAAIoF,QAAQ,GAAGjD,QAAQ,CAACkD,cAAT,CAAwB,UAAxB,CAAf;AACA,YAAIC,OAAO,GAAGF,QAAQ,CAACG,WAAT,CAAqBpD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAArB,CAAd;AACAF,QAAAA,OAAO,CAACG,SAAR,GAAoB,MAApB;AACAH,QAAAA,OAAO,CAACrF,EAAR,GAAa,aAAa5E,CAA1B,CAVyC,CAYzC;AACA;;AACA,YAAIqK,IAAI,GAAGJ,OAAO,CAACC,WAAR,CAAoBpD,QAAQ,CAACqD,aAAT,CAAuB,GAAvB,CAApB,CAAX;AACAE,QAAAA,IAAI,CAACC,IAAL,GAAY,GAAZ;AACAD,QAAAA,IAAI,CAACD,SAAL,GAAiB,aAAjB;AACAC,QAAAA,IAAI,CAACE,YAAL,GAAoBvK,CAApB;AACAqK,QAAAA,IAAI,CAACG,SAAL,GAAiBV,IAAI,CAACvC,8BAAtB,CAlByC,CAoBxC;;AACH8C,QAAAA,IAAI,CAACI,gBAAL,CAAsB,OAAtB,EAA+B,UAASC,CAAT,EAAY;AACvC;AACA,cAAIC,cAAc,GAAGf,IAAI,CAAC3F,QAAL,CAAc,KAAKsG,YAAnB,CAArB,CAFuC,CAGvC;;AACA/D,UAAAA,UAAU,CAACmE,cAAD,CAAV,CAJuC,CAKvC;;AACA/D,UAAAA,WAAW,CAAC+D,cAAD,CAAX,CANuC,CAOvC;;AACA,cAAIC,UAAU,GAAG9D,QAAQ,CAACC,sBAAT,CAAgC,QAAhC,CAAjB;;AACA,cAAI6D,UAAU,CAAC,CAAD,CAAd,EAAmB;AACnBA,YAAAA,UAAU,CAAC,CAAD,CAAV,CAAcC,SAAd,CAAwB7D,MAAxB,CAA+B,QAA/B;AACC;;AACD,eAAKc,UAAL,CAAgB+C,SAAhB,CAA0BC,GAA1B,CAA8B,QAA9B;AACH,SAbD,EArB2C,CAoCzC;AACA;;AACA,YAAIC,OAAO,GAAGd,OAAO,CAACC,WAAR,CAAoBpD,QAAQ,CAACqD,aAAT,CAAuB,KAAvB,CAApB,CAAd;AACAY,QAAAA,OAAO,CAACP,SAAR,GAAoBV,IAAI,CAACtC,+BAAzB;;AACA,YAAIsC,IAAI,CAACkB,KAAT,EAAgB;AACdD,UAAAA,OAAO,CAACP,SAAR,IAAqB,QAAQV,IAAI,CAACmB,cAAlC;AACD;AACF;AACJ;AACE;;AAGD,MAAIpB,MAAM,GAAGqB,KAAK,4NAA4N;AAC5OC,IAAAA,KAAK,EAAE;AADqO,GAA5N,CAAL,CAGVC,IAHU,CAGL,UAAAC,GAAG;AAAA,WAAGA,GAAG,CAACC,IAAJ,EAAH;AAAA,GAHE,EAIVF,IAJU,CAIL,UAAAE,IAAI;AAAA,WAAG,2CAAgBA,IAAhB,CAAH;AAAA,GAJC,EAKVF,IALU,CAKL,UAAAvB,MAAM,EAAG;AACX3E,IAAAA,OAAO,CAACuE,GAAR,CAAY,QAAZ,EAAqBI,MAArB;AACApE,IAAAA,GAAG,CAACwC,SAAJ,CAAc,QAAd,EAAwB;AACpB,cAAQ,SADY;AAEpB,cAAQ4B;AAFY,KAAxB;AAIIpE,IAAAA,GAAG,CAAC4D,QAAJ,CAAa;AACT,YAAM,QADG;AAET,gBAAU,QAFD;AAGT,cAAQ,QAHC;AAIT,eAAS;AACT,yBAAiB,EADR;AAET,wBAAgB,SAFP;AAGT,0BAAkB,GAHT,CAIT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvBS;AAJA,KAAb;AA8BA5D,IAAAA,GAAG,CAAC4D,QAAJ,CAAa;AACT,YAAM,kBADG;AAET,cAAQ,SAFC;AAGT,gBAAU,QAHD;AAIT,iBAAW,CAJF;AAKT,eAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAqB,CACrB,aADqB,EAErB,CAAC,QAAD,CAFqB,EAGrB,CAAC,MAAD,CAHqB,EAIrB,CAJqB,EAIlB,CAJkB,EAKrB,CALqB,EAKlB,CALkB,CAXZ;AAkBT;AACA;AACA;AACA,yBAAiB,CACjB,aADiB,EAEjB,CAAC,QAAD,CAFiB,EAGjB,CAAC,iBAAD,CAHiB,EAIjB,CAJiB,EAId,oBAJc,EAKjB,GALiB,EAKZ,kBALY,EAMjB,GANiB,EAMZ,kBANY,EAOjB,GAPiB,EAOZ,kBAPY,EAQjB,GARiB,EAQZ,iBARY,EASjB,CATiB,EASd,gBATc,CArBR;AAgCT;AACA,0BAAkB,CAClB,aADkB,EAElB,CAAC,QAAD,CAFkB,EAGlB,CAAC,MAAD,CAHkB,EAIlB,CAJkB,EAIf,CAJe,EAKlB,CALkB,EAKf,EALe,CAjCT;AAwCT;AACA,2BAAmB,CACnB,aADmB,EAEnB,CAAC,QAAD,CAFmB,EAGnB,CAAC,MAAD,CAHmB,EAInB,CAJmB,EAIhB,CAJgB,EAKnB,CALmB,EAKhB,CALgB;AAzCV;AALA,KAAb;AAuDAM,IAAAA,cAAc,CAACE,MAAD,CAAd,CA3FO,CA4FC;;AACRpE,IAAAA,GAAG,CAACW,EAAJ,CAAO,OAAP,EAAgB,UAASsE,CAAT,EAAY;AACxB;AACA,UAAIa,oBAAJ;AACA,UAAItH,QAAQ,GAAGwB,GAAG,CAAC+F,qBAAJ,CAA0Bd,CAAC,CAAClJ,KAA5B,EAAmC;AAAE2G,QAAAA,MAAM,EAAE,CAAC,QAAD;AAAV,OAAnC,CAAf;;AACA,UAAIlE,QAAQ,CAAChE,MAAb,EAAqB;AACrB,YAAIwL,YAAY,GAAGxH,QAAQ,CAAC,CAAD,CAA3B,CADqB,CAErB;;AACAuC,QAAAA,UAAU,CAACiF,YAAD,CAAV,CAHqB,CAIrB;;AACA7E,QAAAA,WAAW,CAAC6E,YAAD,CAAX,CALqB,CAMrB;;AACA,YAAIb,UAAU,GAAG9D,QAAQ,CAACC,sBAAT,CAAgC,QAAhC,CAAjB;;AACA,YAAI6D,UAAU,CAAC,CAAD,CAAd,EAAmB;AACfA,UAAAA,UAAU,CAAC,CAAD,CAAV,CAAcC,SAAd,CAAwB7D,MAAxB,CAA+B,QAA/B;AACH,SAVoB,CAWrB;;;AACA,YAAI0E,eAAe,GAAGD,YAAY,CAAC9G,UAAb,CAAwB2C,QAA9C;;AAEA,aAAK,IAAItH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6J,MAAM,CAAC5F,QAAP,CAAgBhE,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC7C,cAAI6J,MAAM,CAAC5F,QAAP,CAAgBjE,CAAhB,EAAmB2E,UAAnB,CAA8B2C,QAA9B,KAA2CoE,eAA/C,EAAgE;AAChEH,YAAAA,oBAAoB,GAAGvL,CAAvB;AACC;AACJ,SAlBoB,CAmBrB;;;AACA,YAAIiK,OAAO,GAAGnD,QAAQ,CAACkD,cAAT,CAAwB,aAAauB,oBAArC,CAAd;AACAtB,QAAAA,OAAO,CAACY,SAAR,CAAkBC,GAAlB,CAAsB,QAAtB;AACC;AACJ,KA3BD;AA4BJ,WAAOjB,MAAP;AACH,GA/HU,CAAb;AAsIFpE,EAAAA,GAAG,CAAC4D,QAAJ,CAAa;AACT,UAAM,cADG;AAET,cAAU,WAFD;AAGT,oBAAgB,UAHP;AAIT,cAAU,CAAC,IAAD,EAAO,SAAP,EAAkB,MAAlB,CAJD;AAKT,YAAQ,gBALC;AAMT,eAAW,EANF;AAOT,aAAS;AACL,8BAAwB,MADnB;AAEL;AACA;AACA,+BAAyB,CACrB,aADqB,EACN,CAAC,QAAD,CADM,EACM,CAAC,MAAD,CADN,EAErB,EAFqB,EAEjB,CAFiB,EAGrB,KAHqB,EAGd,CAAC,KAAD,EAAQ,QAAR,CAHc,CAJpB;AASL,6BAAuB,CACnB,aADmB,EACJ,CAAC,QAAD,CADI,EACQ,CAAC,MAAD,CADR,EAEnB,EAFmB,EAEf,CAFe,EAGnB,KAHmB,EAGZ,CAAC,KAAD,EAAQ,YAAR,CAHY,CATlB;AAcL,gCAA0B;AAdrB;AAPA,GAAb,EAuBOhB,YAvBP,EAtViB,CAgXb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAED;AAON,CAlYD","file":"hydro-grass-viz.e31bb0bc.map","sourceRoot":"..","sourcesContent":["/* This file was generated by r.out.leaflet GRASS GIS module. */\n\nvar layerInfos = [\n   {title: \"D03_37_20171201_20160228_disch.120\", file: \"D03_37_20171201_20160228_disch.120.png\", bounds: [[35.74142458, -78.61239861], [35.75521359, -78.62931361]], opacity: 1.0}\n   ,   {title: \"D03_37_20079201_20160228_disch.120\", file: \"D03_37_20079201_20160228_disch.120.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n   ,   {title: \"D03_37_20170101_20160228_disch.120\", file: \"D03_37_20170101_20160228_disch.120.png\", bounds: [[35.71405388, -78.64622289], [35.72783834, -78.66312646]], opacity: 1.0}\n   ,   {title: \"D03_37_20171301_20160228_disch.120\", file: \"D03_37_20171301_20160228_disch.120.png\", bounds: [[35.76889760, -78.61226696], [35.78268650, -78.62918773]], opacity: 1.0}\n   ,   {title: \"D03_37_20079301_20160228_disch.120\", file: \"D03_37_20079301_20160228_disch.120.png\", bounds: [[35.76909351, -78.67969828], [35.78287312, -78.69660768]], opacity: 1.0}\n   ,   {title: \"D03_37_20172203_20160228_disch.120\", file: \"D03_37_20172203_20160228_disch.120.png\", bounds: [[35.72757609, -78.57876604], [35.74136979, -78.59568383]], opacity: 1.0}\n   ,   {title: \"D03_37_20079101_20160228_disch.120\", file: \"D03_37_20079101_20160228_disch.120.png\", bounds: [[35.71414711, -78.67991570], [35.72792693, -78.69681359]], opacity: 1.0}\n   ,   {title: \"D03_37_20171101_20160228_disch.120\", file: \"D03_37_20171101_20160228_disch.120.png\", bounds: [[35.71395133, -78.61253016], [35.72774044, -78.62943940]], opacity: 1.0}\n   ,   {title: \"D03_37_20170301_20160228_disch.120\", file: \"D03_37_20170301_20160228_disch.120.png\", bounds: [[35.76900022, -78.64598258], [35.78278447, -78.66289767]], opacity: 1.0}\n   ,   {title: \"D03_37_20172403_20160228_disch.120\", file: \"D03_37_20172403_20160228_disch.120.png\", bounds: [[35.78252204, -78.57847985], [35.79631554, -78.59540919]], opacity: 1.0}\n   ,   {title: \"D03_37_20170201_20160228_disch.120\", file: \"D03_37_20170201_20160228_disch.120.png\", bounds: [[35.74152717, -78.64610278], [35.75531153, -78.66301210]], opacity: 1.0}\n   ,   {title: \"D03_37_20079102_20160228_disch\", file: \"D03_37_20079102_20160228_disch.png\", bounds: [[35.71410166, -78.66306929], [35.72788380, -78.67997001]], opacity: 1.0}\n   ,   {title: \"D03_37_20170203_20160228_disch\", file: \"D03_37_20170203_20160228_disch.png\", bounds: [[35.72779056, -78.64616284], [35.74157497, -78.66306929]], opacity: 1.0}\n   ,   {title: \"D03_37_20170204_20160228_disch\", file: \"D03_37_20170204_20160228_disch.png\", bounds: [[35.72774044, -78.62931361], [35.74152717, -78.64622289]], opacity: 1.0}\n   ,   {title: \"D03_37_20170302_20160228_disch\", file: \"D03_37_20170302_20160228_disch.png\", bounds: [[35.76895007, -78.62912476], [35.78273665, -78.64604269]], opacity: 1.0}\n   ,   {title: \"D03_37_20171102_20160228_disch\", file: \"D03_37_20171102_20160228_disch.png\", bounds: [[35.71389655, -78.59568383], [35.72768798, -78.61259590]], opacity: 1.0}\n   ,   {title: \"D03_37_20172301_20160228_disch\", file: \"D03_37_20172301_20160228_disch.png\", bounds: [[35.76878565, -78.57855144], [35.78257919, -78.59547788]], opacity: 1.0}\n];\n\nexport default layerInfos;","/* This file was generated by r.out.leaflet GRASS GIS module. */\n\nvar dischAnimation = [\n   {title: \"D03_37_20079201_20160228_disch.020\", file: \"D03_37_20079201_20160228_disch.020.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n,   {title: \"D03_37_20079201_20160228_disch.040\", file: \"D03_37_20079201_20160228_disch.040.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n,   {title: \"D03_37_20079201_20160228_disch.060\", file: \"D03_37_20079201_20160228_disch.060.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n,   {title: \"D03_37_20079201_20160228_disch.080\", file: \"D03_37_20079201_20160228_disch.080.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n,   {title: \"D03_37_20079201_20160228_disch.100\", file: \"D03_37_20079201_20160228_disch.100.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n,   {title: \"D03_37_20079201_20160228_disch.120\", file: \"D03_37_20079201_20160228_disch.120.png\", bounds: [[35.74162043, -78.67980703], [35.75540014, -78.69671067]], opacity: 1.0}\n];\n\nexport default dischAnimation;","/*\n * Copyright 2017 Esri\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// checks if 2 x,y points are equal\nfunction pointsEqual (a, b) {\n  for (var i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// checks if the first and last points of a ring are equal and closes the ring\nfunction closeRing (coordinates) {\n  if (!pointsEqual(coordinates[0], coordinates[coordinates.length - 1])) {\n    coordinates.push(coordinates[0]);\n  }\n  return coordinates;\n}\n\n// determine if polygon ring coordinates are clockwise. clockwise signifies outer ring, counter-clockwise an inner ring\n// or hole. this logic was found at http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-\n// points-are-in-clockwise-order\nfunction ringIsClockwise (ringToTest) {\n  var total = 0;\n  var i = 0;\n  var rLength = ringToTest.length;\n  var pt1 = ringToTest[i];\n  var pt2;\n  for (i; i < rLength - 1; i++) {\n    pt2 = ringToTest[i + 1];\n    total += (pt2[0] - pt1[0]) * (pt2[1] + pt1[1]);\n    pt1 = pt2;\n  }\n  return (total >= 0);\n}\n\n// ported from terraformer.js https://github.com/Esri/Terraformer/blob/master/terraformer.js#L504-L519\nfunction vertexIntersectsVertex (a1, a2, b1, b2) {\n  var uaT = ((b2[0] - b1[0]) * (a1[1] - b1[1])) - ((b2[1] - b1[1]) * (a1[0] - b1[0]));\n  var ubT = ((a2[0] - a1[0]) * (a1[1] - b1[1])) - ((a2[1] - a1[1]) * (a1[0] - b1[0]));\n  var uB = ((b2[1] - b1[1]) * (a2[0] - a1[0])) - ((b2[0] - b1[0]) * (a2[1] - a1[1]));\n\n  if (uB !== 0) {\n    var ua = uaT / uB;\n    var ub = ubT / uB;\n\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// ported from terraformer.js https://github.com/Esri/Terraformer/blob/master/terraformer.js#L521-L531\nfunction arrayIntersectsArray (a, b) {\n  for (var i = 0; i < a.length - 1; i++) {\n    for (var j = 0; j < b.length - 1; j++) {\n      if (vertexIntersectsVertex(a[i], a[i + 1], b[j], b[j + 1])) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// ported from terraformer.js https://github.com/Esri/Terraformer/blob/master/terraformer.js#L470-L480\nfunction coordinatesContainPoint (coordinates, point) {\n  var contains = false;\n  for (var i = -1, l = coordinates.length, j = l - 1; ++i < l; j = i) {\n    if (((coordinates[i][1] <= point[1] && point[1] < coordinates[j][1]) ||\n         (coordinates[j][1] <= point[1] && point[1] < coordinates[i][1])) &&\n        (point[0] < (((coordinates[j][0] - coordinates[i][0]) * (point[1] - coordinates[i][1])) / (coordinates[j][1] - coordinates[i][1])) + coordinates[i][0])) {\n      contains = !contains;\n    }\n  }\n  return contains;\n}\n\n// ported from terraformer-arcgis-parser.js https://github.com/Esri/terraformer-arcgis-parser/blob/master/terraformer-arcgis-parser.js#L106-L113\nfunction coordinatesContainCoordinates (outer, inner) {\n  var intersects = arrayIntersectsArray(outer, inner);\n  var contains = coordinatesContainPoint(outer, inner[0]);\n  if (!intersects && contains) {\n    return true;\n  }\n  return false;\n}\n\n// do any polygons in this array contain any other polygons in this array?\n// used for checking for holes in arcgis rings\n// ported from terraformer-arcgis-parser.js https://github.com/Esri/terraformer-arcgis-parser/blob/master/terraformer-arcgis-parser.js#L117-L172\nfunction convertRingsToGeoJSON (rings) {\n  var outerRings = [];\n  var holes = [];\n  var x; // iterator\n  var outerRing; // current outer ring being evaluated\n  var hole; // current hole being evaluated\n\n  // for each ring\n  for (var r = 0; r < rings.length; r++) {\n    var ring = closeRing(rings[r].slice(0));\n    if (ring.length < 4) {\n      continue;\n    }\n    // is this ring an outer ring? is it clockwise?\n    if (ringIsClockwise(ring)) {\n      var polygon = [ ring.slice().reverse() ]; // wind outer rings counterclockwise for RFC 7946 compliance\n      outerRings.push(polygon); // push to outer rings\n    } else {\n      holes.push(ring.slice().reverse()); // wind inner rings clockwise for RFC 7946 compliance\n    }\n  }\n\n  var uncontainedHoles = [];\n\n  // while there are holes left...\n  while (holes.length) {\n    // pop a hole off out stack\n    hole = holes.pop();\n\n    // loop over all outer rings and see if they contain our hole.\n    var contained = false;\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (coordinatesContainCoordinates(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        contained = true;\n        break;\n      }\n    }\n\n    // ring is not contained in any outer ring\n    // sometimes this happens https://github.com/Esri/esri-leaflet/issues/320\n    if (!contained) {\n      uncontainedHoles.push(hole);\n    }\n  }\n\n  // if we couldn't match any holes using contains we can try intersects...\n  while (uncontainedHoles.length) {\n    // pop a hole off out stack\n    hole = uncontainedHoles.pop();\n\n    // loop over all outer rings and see if any intersect our hole.\n    var intersects = false;\n\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (arrayIntersectsArray(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        intersects = true;\n        break;\n      }\n    }\n\n    if (!intersects) {\n      outerRings.push([hole.reverse()]);\n    }\n  }\n\n  if (outerRings.length === 1) {\n    return {\n      type: 'Polygon',\n      coordinates: outerRings[0]\n    };\n  } else {\n    return {\n      type: 'MultiPolygon',\n      coordinates: outerRings\n    };\n  }\n}\n\n// This function ensures that rings are oriented in the right directions\n// outer rings are clockwise, holes are counterclockwise\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nfunction orientRings (poly) {\n  var output = [];\n  var polygon = poly.slice(0);\n  var outerRing = closeRing(polygon.shift().slice(0));\n  if (outerRing.length >= 4) {\n    if (!ringIsClockwise(outerRing)) {\n      outerRing.reverse();\n    }\n\n    output.push(outerRing);\n\n    for (var i = 0; i < polygon.length; i++) {\n      var hole = closeRing(polygon[i].slice(0));\n      if (hole.length >= 4) {\n        if (ringIsClockwise(hole)) {\n          hole.reverse();\n        }\n        output.push(hole);\n      }\n    }\n  }\n\n  return output;\n}\n\n// This function flattens holes in multipolygons to one array of polygons\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nfunction flattenMultiPolygonRings (rings) {\n  var output = [];\n  for (var i = 0; i < rings.length; i++) {\n    var polygon = orientRings(rings[i]);\n    for (var x = polygon.length - 1; x >= 0; x--) {\n      var ring = polygon[x].slice(0);\n      output.push(ring);\n    }\n  }\n  return output;\n}\n\n// shallow object clone for feature properties and attributes\n// from http://jsperf.com/cloning-an-object/2\nfunction shallowClone (obj) {\n  var target = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      target[i] = obj[i];\n    }\n  }\n  return target;\n}\n\nfunction getId (attributes, idAttribute) {\n  var keys = idAttribute ? [idAttribute, 'OBJECTID', 'FID'] : ['OBJECTID', 'FID'];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (\n      key in attributes &&\n      (typeof attributes[key] === 'string' ||\n        typeof attributes[key] === 'number')\n    ) {\n      return attributes[key];\n    }\n  }\n  throw Error('No valid id attribute found');\n}\n\nexport function arcgisToGeoJSON (arcgis, idAttribute) {\n  var geojson = {};\n\n  if (arcgis.features) {\n    geojson.type = 'FeatureCollection';\n    geojson.features = [];\n    for (var i = 0; i < arcgis.features.length; i++) {\n      geojson.features.push(arcgisToGeoJSON(arcgis.features[i], idAttribute));\n    }\n  }\n\n  if (typeof arcgis.x === 'number' && typeof arcgis.y === 'number') {\n    geojson.type = 'Point';\n    geojson.coordinates = [arcgis.x, arcgis.y];\n    if (typeof arcgis.z === 'number') {\n      geojson.coordinates.push(arcgis.z);\n    }\n  }\n\n  if (arcgis.points) {\n    geojson.type = 'MultiPoint';\n    geojson.coordinates = arcgis.points.slice(0);\n  }\n\n  if (arcgis.paths) {\n    if (arcgis.paths.length === 1) {\n      geojson.type = 'LineString';\n      geojson.coordinates = arcgis.paths[0].slice(0);\n    } else {\n      geojson.type = 'MultiLineString';\n      geojson.coordinates = arcgis.paths.slice(0);\n    }\n  }\n\n  if (arcgis.rings) {\n    geojson = convertRingsToGeoJSON(arcgis.rings.slice(0));\n  }\n\n  if (\n    typeof arcgis.xmin === 'number' &&\n    typeof arcgis.ymin === 'number' &&\n    typeof arcgis.xmax === 'number' &&\n    typeof arcgis.ymax === 'number'\n  ) {\n    geojson.type = 'Polygon';\n    geojson.coordinates = [[\n      [arcgis.xmax, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymax]\n    ]];\n  }\n\n  if (arcgis.geometry || arcgis.attributes) {\n    geojson.type = 'Feature';\n    geojson.geometry = (arcgis.geometry) ? arcgisToGeoJSON(arcgis.geometry) : null;\n    geojson.properties = (arcgis.attributes) ? shallowClone(arcgis.attributes) : null;\n    if (arcgis.attributes) {\n      try {\n        geojson.id = getId(arcgis.attributes, idAttribute);\n      } catch (err) {\n        // don't set an id\n      }\n    }\n  }\n\n  // if no valid geometry was encountered\n  if (JSON.stringify(geojson.geometry) === JSON.stringify({})) {\n    geojson.geometry = null;\n  }\n\n  if (\n    arcgis.spatialReference &&\n    arcgis.spatialReference.wkid &&\n    arcgis.spatialReference.wkid !== 4326\n  ) {\n    console.warn('Object converted in non-standard crs - ' + JSON.stringify(arcgis.spatialReference));\n  }\n\n  return geojson;\n}\n\nexport function geojsonToArcGIS (geojson, idAttribute) {\n  idAttribute = idAttribute || 'OBJECTID';\n  var spatialReference = { wkid: 4326 };\n  var result = {};\n  var i;\n\n  switch (geojson.type) {\n    case 'Point':\n      result.x = geojson.coordinates[0];\n      result.y = geojson.coordinates[1];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPoint':\n      result.points = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'LineString':\n      result.paths = [geojson.coordinates.slice(0)];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiLineString':\n      result.paths = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'Polygon':\n      result.rings = orientRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPolygon':\n      result.rings = flattenMultiPolygonRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'Feature':\n      if (geojson.geometry) {\n        result.geometry = geojsonToArcGIS(geojson.geometry, idAttribute);\n      }\n      result.attributes = (geojson.properties) ? shallowClone(geojson.properties) : {};\n      if (geojson.id) {\n        result.attributes[idAttribute] = geojson.id;\n      }\n      break;\n    case 'FeatureCollection':\n      result = [];\n      for (i = 0; i < geojson.features.length; i++) {\n        result.push(geojsonToArcGIS(geojson.features[i], idAttribute));\n      }\n      break;\n    case 'GeometryCollection':\n      result = [];\n      for (i = 0; i < geojson.geometries.length; i++) {\n        result.push(geojsonToArcGIS(geojson.geometries[i], idAttribute));\n      }\n      break;\n  }\n\n  return result;\n}\n\nexport default { arcgisToGeoJSON: arcgisToGeoJSON, geojsonToArcGIS: geojsonToArcGIS };\n","import flood_0_5 from './images/inundation_0.5.png';\nimport flood_1_0 from './images/inundation_1.0.png';\nimport flood_1_5 from './images/inundation_1.5.png';\nimport flood_2_0 from './images/inundation_2.0.png';\nimport flood_2_5 from './images/inundation_2.5.png';\nimport flood_3_0 from './images/inundation_3.0.png';\nimport flood_3_5 from './images/inundation_3.5.png';\nimport flood_4_0 from './images/inundation_4.0.png';\nimport flood_4_5 from './images/inundation_4.5.png';\nimport flood_5_0 from './images/inundation_5.0.png';\nimport simwe from './images/simwe/data_file';\nimport importedDischarge from './images/simwe/*.png';\nimport dischAnimation from './images/grassoutput/data_file';\nimport dischAnimationImages from './images/grassoutput/*.png';\n\n// import React, {Component} from 'react';\n// import {render} from 'react-dom';\n// import {StaticMap} from 'react-map-gl';\n// import DeckGL, {ScreenGridLayer} from 'deck.gl';\n// import {isWebGL2} from 'luma.gl';\nimport { arcgisToGeoJSON } from '@esri/arcgis-to-geojson-utils';\n\n\n\nmapboxgl.accessToken = process.env.MapboxAccessToken;\nconst map = new mapboxgl.Map({\n    container: 'map',\n    zoom: 12,\n    center: [-78.6319,35.7099],\n    pitch: 45,\n    style: 'mapbox://styles/ctwhite/cjtnhxudz2j4l1fs74h5hygce',\n    hash: true\n}).addControl(new mapboxgl.NavigationControl());\n\n//Convert Bounds to match mapbox gl source specs\nfunction grassBbox(bounds) {\n    return [\n        [bounds[1][1], bounds[1][0]],\n        [bounds[0][1], bounds[1][0]],\n        [bounds[0][1], bounds[0][0]],           \n        [bounds[1][1], bounds[0][0]]\n    ];\n}\n\nmap.on('load', () => {\n\n    function setScaleForLevel(scale) {\n        let setScale = 15;\n        switch (scale) {\n            case 'Household':\n                setScale = 17;\n                break;\n            case 'Neighborhood':\n                setScale = 15;\n                break;\n            case 'City':\n                setScale = 12;\n                break;\n            case 'Region':\n                setScale = 10;\n                break;\n            default:\n                setScale = 15;\n        }\n        return setScale;\n    }\n\n    function flyToStore(currentFeature) {\n        map.flyTo({\n          center: currentFeature.geometry.coordinates,\n          zoom: setScaleForLevel(currentFeature.properties.what_spatial_scales_does_this_p)\n        });\n      }\n      \n      function createPopUp(currentFeature) {\n        var popUps = document.getElementsByClassName('mapboxgl-popup');\n        // Check if there is already a popup on the map and if so, remove it\n        if (popUps[0]) popUps[0].remove();\n      \n        var popup = new mapboxgl.Popup({ closeOnClick: true })\n          .setLngLat(currentFeature.geometry.coordinates)\n          .setHTML(`<h3><strong>ID: ${currentFeature.properties.ObjectId}</strong> </h3>` +\n            '<h4><strong>Details: </strong>' + currentFeature.properties.why_is_this_location_a_problem + '</h4>' +\n            '<h4><strong>Difficulty: </strong>' + currentFeature.properties.how_challenging_is_this_problem + '</h4>' +\n            '<h4><strong>Challenge: </strong>' + currentFeature.properties.why_is_this_location_a_problem + '</h4>' +\n            '<h4><strong>Obstacle: </strong>' + currentFeature.properties.what_is_the_greatest_barrier_to + '</h4>' +\n            '<h4><strong>Supplies: </strong>' + currentFeature.properties.what_actions_can_be_taken_to_fi + '</h4>' +\n            '<h4>Get Started!</h4>'\n            )\n          .addTo(map);\n      }\n\n      // This will let you use the .remove() function later on\n        if (!('remove' in Element.prototype)) {\n            Element.prototype.remove = function() {\n            if (this.parentNode) {\n                this.parentNode.removeChild(this);\n            }\n            };\n        }\n\n    // //Discharge GIF\n    // var currentDischargeImage = 0;\n    // var dischargeImages = [discharge020, discharge040, discharge060, discharge080, discharge100, discharge120];\n    // function getDischargePath() {\n    //     return dischargeImages[currentDischargeImage];\n    // }\n    if (! map.getSource('composite')) {map.addSource('composite', { type: 'vector', url: 'mapbox://mapbox.mapbox-streets-v7'});}\n\n    const layers = map.getStyle().layers;\n \n    let labelLayerId;\n    for (var i = 0; i < layers.length; i++) {\n        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\n        labelLayerId = layers[i].id;\n        break;\n        }\n    }\n \n    //Flooding GIF\n    var frameCount = 10;\n    var currentImage = 9;\n    var floodingImages = [flood_0_5, flood_1_0, flood_1_5, flood_2_0, flood_2_5, flood_3_0, flood_3_5, flood_4_0, flood_4_5, flood_5_0];\n    function getPath() {\n        return floodingImages[currentImage];\n    }\n\n\n    map.addSource('floodOverlay', {\n        type: 'image',\n        url: getPath(),\n        coordinates: [\n            [-78.7746204947222, 35.8096093825],\n            [-78.6083031766667, 35.8096093825],\n            [-78.6083031766667, 35.6875072969444],\n            [-78.7746204947222, 35.6875072969444]    \n        ]\n     });\n\n    map.addLayer({\n        \"id\": \"floodOverlay\",\n        \"source\": \"floodOverlay\",\n        \"type\": \"raster\",\n        \"paint\": {\n            \"raster-opacity\": 0.85,\n            \"raster-fade-duration\": 0\n        }\n    },labelLayerId);\n\n\n    // //Discharge GIF\n    //Turned off for demo\n    // var currentDischargeImage = 0;\n    // function getDischargePath() {\n    //     return dischAnimationImages[dischAnimation[currentDischargeImage].title];\n    // }\n\n    // map.addSource(\"dischAnimation\", {\n    //     type: 'image',\n    //     url: getDischargePath(),\n    //     coordinates: grassBbox(dischAnimation[0].bounds)\n    // });\n\n    // map.addLayer({\n    //     \"id\": \"dischAnimation\",\n    //     \"source\": \"dischAnimation\",\n    //     \"type\": \"raster\",\n    //     \"paint\": {\n    //         \"raster-opacity\": 0.60,\n    //         \"raster-fade-duration\": 2\n    //     }\n    // });\n    // console.log(\"dischAnimation\", dischAnimation.length)\n    // setInterval(function() {\n    //     currentDischargeImage = currentDischargeImage + 1;\n    //     if (currentDischargeImage >= dischAnimation.length) {\n    //         currentDischargeImage = 0;\n    //     }\n    //     map.getSource(\"dischAnimation\").updateImage({ url: getDischargePath() });\n    // }, 200);\n   \n    \n        simwe.forEach(element => {\n            console.log(importedDischarge[element.title])\n            map.addSource(element.title, {\n                type: 'image',\n                url: importedDischarge[element.title],\n                coordinates: grassBbox(element.bounds)\n            });\n    \n            map.addLayer({\n                \"id\": element.title,\n                \"source\": element.title,\n                \"type\": \"raster\",\n                \"paint\": {\n                    \"raster-opacity\": 0.60,\n                    \"raster-fade-duration\": 2\n                }\n            },labelLayerId);\n        });\n\n    function buildLevelList(data) {\n        if (data.features.length !== levels.length) {\n        // Iterate through the list of stores\n        for (i = 0; i < data.features.length; i++) {\n          var currentFeature = data.features[i];\n          // Shorten data.feature.properties to `prop` so we're not\n          // writing this long form over and over again.\n          var prop = currentFeature.properties;\n          // Select the listing container in the HTML and append a div\n          // with the class 'item' for each store\n          var listings = document.getElementById('listings');\n          var listing = listings.appendChild(document.createElement('div'));\n          listing.className = 'item';\n          listing.id = 'listing-' + i;\n      \n          // Create a new link with the class 'title' for each store\n          // and fill it with the store address\n          var link = listing.appendChild(document.createElement('a'));\n          link.href = '#';\n          link.className = 'level-title';\n          link.dataPosition = i;\n          link.innerHTML = prop.why_is_this_location_a_problem;\n\n           // Add an event listener for the links in the sidebar listing\n        link.addEventListener('click', function(e) {\n            // Update the currentFeature to the store associated with the clicked link\n            var clickedListing = data.features[this.dataPosition];\n            // 1. Fly to the point associated with the clicked link\n            flyToStore(clickedListing);\n            // 2. Close all other popups and display popup for clicked store\n            createPopUp(clickedListing);\n            // 3. Highlight listing in sidebar (and remove highlight for all other listings)\n            var activeItem = document.getElementsByClassName('active');\n            if (activeItem[0]) {\n            activeItem[0].classList.remove('active');\n            }\n            this.parentNode.classList.add('active');\n        });\n      \n          // Create a new div with the class 'details' for each store\n          // and fill it with the city and phone number\n          var details = listing.appendChild(document.createElement('div'));\n          details.innerHTML = prop.how_challenging_is_this_problem;\n          if (prop.phone) {\n            details.innerHTML += ' · ' + prop.phoneFormatted;\n          }\n        }\n    }\n      }\n      \n\n      let levels = fetch(`https://services1.arcgis.com/aT1T0pU1ZdpuDk1t/ArcGIS/rest/services/survey123_571499fe84ac4125abe48b793b9970a3_stakeholder/FeatureServer/0/query?f=json&returnGeometry=true&inSR=102100&outFields=*&outSR=4326&where=1=1`, {\n        cache: \"reload\"\n      })\n        .then(res=> res.json())\n        .then(json=> arcgisToGeoJSON(json))\n        .then(levels=> {\n            console.log(\"levels\",levels);\n            map.addSource('levels', {\n                \"type\": \"geojson\",\n                \"data\": levels\n                });\n                map.addLayer({\n                    \"id\": \"levels\",\n                    \"source\": \"levels\",\n                    \"type\": \"circle\",\n                    \"paint\": {\n                    \"circle-radius\": 10,\n                    \"circle-color\": \"#FFE100\",\n                    \"circle-opacity\": 0.8\n                    // 'fill-extrusion-color': '#FFE100',\n                    // use an 'interpolate' expression to add a smooth transition effect to the\n                    // buildings as the user zooms in\n                    // 'fill-extrusion-height': 100,\n                    // 'fill-extrusion-base': [\n                    //     \"interpolate\", [\"linear\"], [\"zoom\"],\n                    //     14, 0,\n                    //     14.05, 0\n                    // ],\n                    // 'fill-extrusion-opacity': 0.8\n                    }\n                    // \"type\": \"symbol\",\n                    // \"layout\": {\n                    //     \"icon-image\": \"star-15\",\n                    //     // \"text-field\": \"{title}\",\n                    //     \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n                    //     \"text-offset\": [0, 0.6],\n                    //     \"text-anchor\": \"top\",\n                    //     \"icon-color\": \"#e00000\"\n                    //     }\n                });\n\n                map.addLayer({\n                    \"id\": \"earthquakes-heat\",\n                    \"type\": \"heatmap\",\n                    \"source\": \"levels\",\n                    \"maxzoom\": 9,\n                    \"paint\": {\n                    // Increase the heatmap weight based on frequency and property magnitude\n                    // \"heatmap-weight\": [\n                    // \"interpolate\",\n                    // [\"linear\"],\n                    // [\"get\", \"mag\"],\n                    // 0, 0,\n                    // 6, 1\n                    // ],\n                    // Increase the heatmap color weight weight by zoom level\n                    // heatmap-intensity is a multiplier on top of heatmap-weight\n                    \"heatmap-intensity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    0, 1,\n                    9, 3\n                    ],\n                    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n                    // Begin color ramp at 0-stop with a 0-transparancy color\n                    // to create a blur-like effect.\n                    \"heatmap-color\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"heatmap-density\"],\n                    0, \"rgba(33,102,172,0)\",\n                    0.2, \"rgb(103,169,207)\",\n                    0.4, \"rgb(209,229,240)\",\n                    0.6, \"rgb(253,219,199)\",\n                    0.8, \"rgb(239,138,98)\",\n                    1, \"rgb(178,24,43)\"\n                    ],\n                    // Adjust the heatmap radius by zoom level\n                    \"heatmap-radius\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    0, 2,\n                    9, 20\n                    ],\n                    // Transition from heatmap to circle layer by zoom level\n                    \"heatmap-opacity\": [\n                    \"interpolate\",\n                    [\"linear\"],\n                    [\"zoom\"],\n                    7, 1,\n                    9, 0\n                    ],\n                    }\n                    });\n                buildLevelList(levels);\n                        // Add an event listener for when a user clicks on the map\n                map.on('click', function(e) {\n                    // Query all the rendered points in the view\n                    var selectedFeatureIndex;\n                    var features = map.queryRenderedFeatures(e.point, { layers: ['levels'] });\n                    if (features.length) {\n                    var clickedPoint = features[0];\n                    // 1. Fly to the point\n                    flyToStore(clickedPoint);\n                    // 2. Close all other popups and display popup for clicked store\n                    createPopUp(clickedPoint);\n                    // 3. Highlight listing in sidebar (and remove highlight for all other listings)\n                    var activeItem = document.getElementsByClassName('active');\n                    if (activeItem[0]) {\n                        activeItem[0].classList.remove('active');\n                    }\n                    // Find the index of the store.features that corresponds to the clickedPoint that fired the event listener\n                    var selectedFeature = clickedPoint.properties.ObjectId;\n                    \n                    for (var i = 0; i < levels.features.length; i++) {\n                        if (levels.features[i].properties.ObjectId === selectedFeature) {\n                        selectedFeatureIndex = i;\n                        }\n                    }\n                    // Select the correct list item using the found index and add the active class\n                    var listing = document.getElementById('listing-' + selectedFeatureIndex);\n                    listing.classList.add('active');\n                    }\n                });\n            return levels;\n        });\n\n       \n\n\n  \n   \n    map.addLayer({\n        'id': '3d-buildings',\n        'source': 'composite',\n        'source-layer': 'building',\n        'filter': ['==', 'extrude', 'true'],\n        'type': 'fill-extrusion',\n        'minzoom': 14,\n        'paint': {\n            'fill-extrusion-color': '#aaa',\n            // use an 'interpolate' expression to add a smooth transition effect to the\n            // buildings as the user zooms in\n            'fill-extrusion-height': [\n                \"interpolate\", [\"linear\"], [\"zoom\"],\n                14, 0,\n                14.05, [\"get\", \"height\"]\n            ],\n            'fill-extrusion-base': [\n                \"interpolate\", [\"linear\"], [\"zoom\"],\n                14, 0,\n                14.05, [\"get\", \"min_height\"]\n            ],\n            'fill-extrusion-opacity': 0.7\n            }\n        }, labelLayerId);\n\n        \n        // map.addLayer({\n        //     'id': 'water-line-layer',\n        //     'source': 'composite',\n        //     'source-layer': 'water',\n        //     'type': 'line',\n        //     'minzoom': 15,\n        //     'paint': {\n        //         'fill-color': '#2ea3f2'\n        //     }\n        // },labelLayerId)\n\n       // Add the data to your map as a layer\n \n   \n\n    \n  \n\n});\n"]}